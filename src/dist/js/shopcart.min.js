"use strict";jQuery(function(t){var c=t.cookie("data"),n=t.cookie("goodsNo").split("&"),e='\n\t<li class="clearfix">\n        <p class="col goods">商品</p>\n        <p class="col price">单价</p>\n        <p class="col amount">数量</p>\n        <p class="col count">小计</p>\n        <p class="col action">操作</p>\n    </li>';c=JSON.parse(c);for(var o=void 0,a=1;a<n.length;a++)for(var l=0;l<c.length;l++)c[l].goodsNo===Number(n[a])&&(e+='\n\t\t\t    \t<li class="clearfix con">\n\t\t\t\t\t    <p class="good_check"><input type="checkbox" name="good" value="" /></p>\n\t\t\t\t\t    <p class="goods_pic"><img src="../'+("../"+c[l].imgurl)+'"></p>\n\t\t\t\t\t    <p class="good_name">'+c[l].name+'</p>\n\t\t\t\t\t    <p class="good_price">￥&nbsp;'+(o=c[l].price.substring(1))+'</p>\n\t\t\t\t\t    <p class="num">\n\t\t\t\t\t        <span class="cutnum">-</span>\n\t\t\t\t\t        <input class="nownum" type="text" value="1" />\n\t\t\t\t\t        <span class="addnum">+</span>\n\t\t\t\t\t    </p>\n\t\t\t\t\t    <p class="good_total">￥&nbsp;'+o+'</p>\n\t\t\t\t\t    <p class="good_del">\n\t\t\t\t\t        <a href="javascript:;">删除</a>\n\t\t\t\t\t    </p>\n\t\t\t\t\t</li>');t("#cart").html(e)}),$(function(){function n(t){var c=t.parent().prev().text(),n=(c=(c=$.trim(c)).substring(2))*t.parent().find("input").val();t.parent().next().html("￥&nbsp;"+n.toFixed(2))}function e(){0==$(".addnum").size()&&$("#del").remove()}$("#cart").on("click",".addnum",function(){var t=$(this).prev().val();100<=++t&&(t=100),$(this).prev().val(t),n($(this));var c=o();a(c),l(c)}),$("#cart").on("click",".cutnum",function(){var t=$(this).next().val();--t<=1&&(t=1),$(this).next().val(t),n($(this));var c=o();a(c),l(c)}),$("#cart").on("click",".good_del",function(){var t=confirm("您确定要删除该行吗？");console.log(t),t&&$(this).parent().remove(),e()});var t=!0;function o(){for(var t=[],c=$(".good_check input").length,n=0;n<c;n++)$(".good_check input").eq(n).prop("checked")&&t.push(n);return t}function a(t){for(var c=0,n=0;n<t.length;n++)c+=parseInt($(".nownum").eq(t[n]).val());$("#allnum").html("已选 "+c+"件商品")}function l(t){for(var c=0,n=0;n<t.length;n++){var e=$(".good_total").eq(t[n]).text();e=(e=$.trim(e)).substring(2),c+=parseInt(e)}$("#totalprice").html("总计（不含运费）：￥"+c.toFixed(2))}$("#allchecked").on("click",function(){t?($("#allchecked input").prop("checked","checked"),$(".good_check input").prop("checked","checked")):($("#allchecked input").removeAttr("checked"),$(".good_check input").removeAttr("checked")),t=!t}),$("#delall").on("click",function(){var t=o();if(confirm("您确定要删除多行吗？")){for(var c=t.length-1;0<=c;c--)$(".good_check").eq(t[c]).parent().remove();e()}console.log(t)}),$("#cart").on("click",".good_check",function(){var t=o();t.length==$(".good_check").length?$("#allchecked input").prop("checked","checked"):$("#allchecked input").removeAttr("checked"),a(t),l(t)})});